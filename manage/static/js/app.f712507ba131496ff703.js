webpackJsonp([1],{"4Uwr":function(e,t,a){e.exports=a.p+"static/img/logo.cc74cd2.jpg"},"7uTX":function(e,t){},FDvv:function(e,t){},H33r:function(e,t){},Hl9i:function(e,t){},IIgB:function(e,t){},LedW:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(e){a("gHy2")},null,null).exports,r=a("/ocq"),s=a("//Fk"),l=a.n(s),c=a("mtWM"),d=a.n(c);d.a.defaults.baseURL="http://111.231.234.250:8888/api/private/v1/",d.a.interceptors.request.use(function(e){var t=localStorage.getItem("mytoken");return t&&(e.headers.Authorization=t),e},function(e){return l.a.reject(e)});var u=function(e){return d.a.get("users",e).then(function(e){return e.data})},m=function(e){return d.a.get("roles").then(function(e){return e.data})},p=function(e){return d.a.get("rights/"+e.type).then(function(e){return e.data})},g=function(e){return d.a.get("categories",{params:e}).then(function(e){return e.data})},h={data:function(){return{form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{loginSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e?(a=t.form,d.a.post("login",a).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status?(localStorage.setItem("mytoken",e.data.token),t.$store.commit("setUsername",e.data.username),console.log("登陆成功"),t.$router.push({name:"Home"})):t.$message({message:e.meta.msg,type:"error"})}):alert("校验不通过")})}}},f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login"},[o("el-form",{ref:"form",staticClass:"container",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",[o("img",{staticClass:"avatar",attrs:{src:a("4Uwr"),alt:""}})]),e._v(" "),o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"用户名","prefix-icon":"myicon myicon-user"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{placeholder:"密码","prefix-icon":"myicon myicon-key",type:"password"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.loginSubmit("form")}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"login-btn",attrs:{type:"primary"},on:{click:function(t){e.loginSubmit("form")}}},[e._v("登陆")])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(h,f,!1,function(e){a("IIgB")},"data-v-6cd92929",null).exports,b={data:function(){return{isCollapse:!1,menusData:[]}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},toggleCollapse:function(){this.isCollapse=!this.isCollapse},logout:function(){localStorage.removeItem("mytoken"),this.$router.push({name:"Login"})}},created:function(){var e=this;d.a.get("menus").then(function(e){return e.data}).then(function(t){e.menusData=t.data})},mounted:function(){u({params:{qurey:"",pagenum:1,pagesize:1}}).then(function(e){})}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("el-container",[a("el-aside",{attrs:{width:"auto"}},[a("el-menu",{staticClass:"el-menu-admin",attrs:{router:!0,"unique-opened":!0,collapse:e.isCollapse},on:{open:e.handleOpen,close:e.handleClose}},e._l(e.menusData,function(t){return a("el-submenu",{key:t.id,attrs:{index:t.path}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location"}),e._v(" "),a("span",[e._v(e._s(t.authName))])]),e._v(" "),e._l(t.children,function(t){return a("el-menu-item",{key:t.id,attrs:{index:t.path}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.authName))])])})],2)}))],1),e._v(" "),a("el-container",[a("el-header",[a("i",{staticClass:"myicon myicon-menu toggle-btn",on:{click:e.toggleCollapse}}),e._v(" "),a("div",{staticClass:"system-title"},[e._v("电商后台管理系统")]),e._v(" "),a("div",[a("span",{staticClass:"welcome"},[e._v("你好,"+e._s(e.$store.getters.username))]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出")])],1)]),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var y=a("VU/8")(b,_,!1,function(e){a("uJiV")},"data-v-2c309450",null).exports,w={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    欢迎登陆\n")])},staticRenderFns:[]};var F=a("VU/8")({},w,!1,function(e){a("FDvv")},"data-v-241bcf16",null).exports,C={data:function(){return{userList:[],query:"",total:0,pagenum:1,pagesize:10,addDialogFormVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},editDialogFormVisible:!1,editForm:{id:"",username:"",email:"",mobile:""},grantDialogFormVisible:!1,grantForm:{},roleList:[],roleId:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入邮箱地址",trigger:"blur,change"}],mobile:[{required:!0,message:"电话不能为空",trigger:"blur"}],loading:!0}}},created:function(){this.initList()},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.initList()},initList:function(){var e=this;this.loading=!0,u({params:{query:this.query,pagenum:this.pagenum,pagesize:this.pagesize}}).then(function(t){console.log(t),e.userList=t.data.users,e.total=t.data.total,e.loading=!1})},changeUserState:function(e){var t,a=this;console.log(e),(t={uid:e.id,type:e.mg_state},d.a.put("users/"+t.uid+"/state/"+t.type,t).then(function(e){return e.data})).then(function(e){200===e.meta.status?a.$message({type:"success",message:"修改用户状态成功"}):a.$message({type:"warning",message:e.meta.msg})})},addUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e&&(a=t.addForm,d.a.post("users",a).then(function(e){return e.data})).then(function(e){console.log(e),201===e.meta.status&&t.$message({type:"success",message:"创建用户成功"}),t.addDialogFormVisible=!1,t.initList()})})},showEditDialog:function(e){var t,a=this;this.editDialogFormVisible=!0,(t=e.id,d.a.get("users/"+t,t).then(function(e){return e.data})).then(function(e){200===e.meta.status&&(a.editForm.username=e.data.username,a.editForm.mobile=e.data.mobile,a.editForm.email=e.data.email,a.editForm.id=e.data.id)})},editUserSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e&&(a=t.editForm,d.a.put("users/"+a.id,a).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status&&t.$message({type:"success",message:"编辑成功"}),t.editDialogFormVisible=!1,t.initList()})})},showDeleteDialog:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a=e.id,d.a.delete("users/"+a).then(function(e){return e.data})).then(function(e){200===e.meta.status&&t.$message({type:"success",message:"删除成功"}),t.initList()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},showGrantDialog:function(e){var t=this;this.grantForm=e,this.grantDialogFormVisible=!0,m().then(function(e){console.log(e),200===e.meta.status&&(t.roleList=e.data)})},grantUserSubmit:function(){var e,t=this;this.roleId?(e={id:this.grantForm.id,rid:this.roleId},d.a.put("users/"+e.id+"/role",{id:e.id,rid:e.rid}).then(function(e){return e.data})).then(function(e){200===e.meta.status?(t.$message({type:"success",message:"设置角色成功"}),t.grantDialogFormVisible=!1):t.$message({type:"error",message:e.meta.msg})}):this.$message({type:"warning",message:"角色不能为空,请选择!"})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("活动详情")])],1)],1)],1),e._v(" "),a("el-row",[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入内容"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.initList(t):null}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.initList},slot:"append"})],1),e._v(" "),a("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加用户")])],1),e._v(" "),a("el-table",{staticClass:"margin-15",staticStyle:{width:"100%"},attrs:{loading:!0,data:e.userList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){e.changeUserState(t.row)}},model:{value:t.row.mg_state,callback:function(a){e.$set(t.row,"mg_state",a)},expression:"scope.row.mg_state"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",title:"编辑用户",plain:""},on:{click:function(a){e.showEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除用户",plain:""},on:{click:function(a){e.showDeleteDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-check",title:"分配角色",plain:""},on:{click:function(a){e.showGrantDialog(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加用户",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addUserForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUserSubmit("addUserForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑用户",visible:e.editDialogFormVisible},on:{"update:visible":function(t){e.editDialogFormVisible=t}}},[a("el-form",{ref:"editUserForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话",prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editUserSubmit("editUserForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.grantDialogFormVisible},on:{"update:visible":function(t){e.grantDialogFormVisible=t}}},[a("el-form",{attrs:{model:e.grantForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"当前的用户"}},[a("el-tag",{attrs:{type:"info"},model:{value:e.grantForm.username,callback:function(t){e.$set(e.grantForm,"username",t)},expression:"grantForm.username"}},[e._v(e._s(e.grantForm.username))])],1),e._v(" "),a("el-form-item",{attrs:{label:"请选择角色"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.roleList,function(e,t){return a("el-option",{key:t,attrs:{label:e.roleName,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.grantDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.grantUserSubmit()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var x=a("VU/8")(C,k,!1,function(e){a("ZF7o")},"data-v-2c5b72c0",null).exports,S={data:function(){return{roleList:[],rightList:[],loading:!0,dialogFormVisible:!1,defaultProps:{children:"children",label:"authName"},selectedRights:[],currentRole:{}}},created:function(){this.initList()},methods:{initList:function(){var e=this;this.loading=!0,m().then(function(t){console.log(t),200===t.meta.status&&(console.log("获取成功"),e.roleList=t.data,e.roleList.roleName=t.data.roleName,e.roleList.roleDesc=t.data.roleDesc,e.loading=!1)})},deleteRight:function(e,t){var a,o=this;(a={roleId:e.id,rightId:t},d.a.delete("roles/"+a.roleId+"/rights/"+a.rightId).then(function(e){return e.data})).then(function(t){console.log("删除成功"),console.log(t),200===t.meta.status?e.children=t.data:o.$messagt({type:"error",message:t.meta.msg})})},showDialog:function(e){var t=this;this.dialogFormVisible=!0,this.currentRole=e,console.log(this.currentRole),p({type:"tree"}).then(function(e){200===e.meta.status?t.rightList=e.data:t.$message({type:"error",message:e.meta.msg})}),this.selectedRights.length=0,this.currentRole.children.forEach(function(e){e.children&&0!==e.children.length&&e.children.forEach(function(e){e.children&&0!==e.children.length&&e.children.forEach(function(e){t.selectedRights.push(e.id)})})})},submitGrant:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");(function(e,t){return d.a.post("roles/"+e+"/rights",t).then(function(e){return e.data})})(this.currentRole.id,{rids:t}).then(function(t){200===t.meta.status&&(e.$message({type:"success",message:t.meta.msg}),e.dialogFormVisible=!1,e.initList())})}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"roles"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色列表")])],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.addDialogFormVisible=!0}}},[e._v("添加角色")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"margin-top_15",staticStyle:{width:"100%"},attrs:{data:e.roleList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row.children,function(o){return a("el-row",{key:o.id},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:""},on:{close:function(a){e.deleteRight(t.row,o.id)}}},[e._v(e._s(o.authName))]),e._v(" "),0!==o.authName.length?a("i",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(o.children,function(o){return a("el-row",{key:o.id},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:"success"},on:{close:function(a){e.deleteRight(t.row,o.id)}}},[e._v(e._s(o.authName))]),e._v(" "),0!==o.authName.length?a("i",{staticClass:"el-icon-arrow-right"}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(o.children,function(o){return a("el-tag",{key:o.id,attrs:{closable:"",type:"warning"},on:{close:function(a){e.deleteRight(t.row,o.id)}}},[e._v(e._s(o.authName))])}))],1)}))],1)}),e._v(" "),0===t.row.children.length?a("el-row",[a("el-col",{attrs:{span:24}},[e._v("该角色没有分配权限,请前往分配!")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDesc",label:"描述",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",title:"编辑角色",icon:"el-icon-edit",plain:""}}),e._v(" "),a("el-button",{attrs:{type:"danger",title:"删除角色",icon:"el-icon-delete",plain:""}}),e._v(" "),a("el-button",{attrs:{type:"warning",title:"授权角色",icon:"el-icon-check",plain:""},on:{click:function(a){e.showDialog(t.row)}}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"tree-container"},[a("el-tree",{ref:"tree",attrs:{data:e.rightList,"show-checkbox":"","default-expand-all":!0,"node-key":"id","default-checked-keys":e.selectedRights,props:e.defaultProps}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitGrant}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var L=a("VU/8")(S,$,!1,function(e){a("iFEc")},"data-v-267e01bc",null).exports,I={data:function(){return{rightList:[],loading:!0}},filters:{fmtLevel:function(e){return"0"===e?"一级":"1"===e?"二级":"三级"}},created:function(){var e=this;this.loading=!0,p({type:"list"}).then(function(t){200===t.meta.status&&(e.rightList=t.data,e.loading=!1)})}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rights"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("权限列表")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rightList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"authName",label:"权限名称",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"path",label:"路径",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"层级",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("fmtLevel")(t.row.level)))])]}}])})],1)],1)},staticRenderFns:[]};var z=a("VU/8")(I,D,!1,function(e){a("Hl9i")},"data-v-6a91d4ee",null).exports,V=a("c/Tr"),R=a.n(V),U={name:"tree-grid",props:{treeStructure:{type:Boolean,default:!1},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}},controls:{type:Boolean,default:!0},defaultExpandAll:{type:Boolean,default:!1}},data:function(){return{}},computed:{data:function(){if(this.treeStructure){var e=this.handleData(this.dataSource,null,null,this.defaultExpandAll);return e}return this.dataSource}},methods:{handleData:function(e,t,a,o){var n=this,i=[];return R()(e).forEach(function(e){void 0===e._expanded&&n.$set(e,"_expanded",o),t&&n.$set(e,"_parent",t);var r=0;if(void 0!==a&&null!==a&&(r=a+1),n.$set(e,"_level",r),i.push(e),e.children&&e.children.length>0){var s=n.handleData(e.children,e,r,o);i=i.concat(s)}}),i},showRow:function(e){var t=e.row,a=(e.rowIndex,!t._parent||t._parent._expanded&&t._parent._show);return t._show=a,a?"":"display:none;"},toggle:function(e){var t=this.data[e];t._expanded=!t._expanded},spaceIconShow:function(e){return!(!this.treeStructure||0!==e)},toggleIconShow:function(e,t){return!!(this.treeStructure&&0===e&&t.children&&t.children.length>0)},getCateInfoById:function(e){this.$emit("editCate",e.cat_id)},deleteCategory:function(e){this.$emit("deleteCate",e.cat_id)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.data,border:"","row-style":e.showRow}},[e._l(e.columns,function(t,o){return a("el-table-column",{key:t.dataIndex,attrs:{width:t.width,label:t.text},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t,n){return e.spaceIconShow(o)?a("span",{key:n,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.toggleIconShow(o,n.row)?a("el-button",{attrs:{type:"success",plain:"",size:"mini",round:""},on:{click:function(t){e.toggle(n.$index)}}},[n.row._expanded?e._e():a("i",{staticClass:"el-icon-plus",attrs:{"aria-hidden":"true"}}),e._v(" "),n.row._expanded?a("i",{staticClass:"el-icon-minus",attrs:{"aria-hidden":"true"}}):e._e()]):0===o?a("el-button",{attrs:{size:"mini",disabled:"",round:""}},[a("i",{staticClass:"el-icon-minus"})]):0===o?a("span",{staticClass:"ms-tree-space"}):e._e(),e._v("\n      "+e._s(n.row[t.dataIndex])+"\n    ")]}}])})}),e._v(" "),e.controls?a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",title:"修改商品分类",type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){e.getCateInfoById(t.row)}}}),e._v(" "),a("el-button",{attrs:{plain:"",title:"删除商品分类",type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){e.deleteCategory(t.row)}}})]}}])}):e._e()],2)},staticRenderFns:[]};var N={data:function(){return{addForm:{cat_name:"",cat_pid:0,cat_level:0},options:[],selectedOptions:[],props:{value:"cat_id",label:"cat_name"},addDialogFormVisible:!1,dataSource:[],total:0,pagenum:1,pagesize:10,columns:[{text:"分类名称",dataIndex:"cat_name",width:""},{text:"是否有效",dataIndex:"cat_deleted",width:""},{text:"排序",dataIndex:"cat_level",width:""}],rules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}}},components:{TreeGrid:a("VU/8")(U,E,!1,function(e){a("xoAv")},"data-v-704ec3dc",null).exports},created:function(){this.initList()},methods:{deleteCategory:function(e){console.log(e)},editCategory:function(e){console.log(e)},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pagesize=e,this.initList()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagenum=e,this.initList()},initList:function(){var e=this;g({type:"3",pagenum:this.pagenum,pagesize:this.pagesize}).then(function(t){console.log(t),e.total=t.data.total,e.dataSource=t.data.result})},handleChange:function(e){console.log(e)},addCategory:function(){var e=this;this.addDialogFormVisible=!0,g({type:"2"}).then(function(t){console.log(t),200===t.meta.status&&(e.options=t.data)})},addCateSubmit:function(e){var t=this;this.$refs[e].validate(function(e){var a;e&&(0===t.selectedOptions.length?(t.addForm.cat_pid=0,t.addForm.cat_level=0):1===t.selectedOptions.length?(t.addForm.cat_pid=t.selectedOptions[t.selectedOptions.length-1],t.addForm.cat_level=1):(t.addForm.cat_pid=t.selectedOptions[t.selectedOptions.length-1],t.addForm.cat_level=2),(a=t.addForm,d.a.post("categories",a).then(function(e){return e.data})).then(function(e){201===e.meta.status&&(t.addDialogFormVisible=!1,t.initList(),t.$message({type:"success",message:e.meta.msg}))}))})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"category"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品分类")])],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"success",plain:""},on:{click:e.addCategory}},[e._v("添加分类")])],1),e._v(" "),a("tree-grid",{attrs:{treeStructure:!0,columns:e.columns,"data-source":e.dataSource},on:{deleteCate:e.deleteCategory,editCate:e.editCategory}}),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加分类",visible:e.addDialogFormVisible},on:{"update:visible":function(t){e.addDialogFormVisible=t}}},[a("el-form",{ref:"addCateForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.cat_name,callback:function(t){e.$set(e.addForm,"cat_name",t)},expression:"addForm.cat_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级名称"}},[a("el-cascader",{attrs:{options:e.options,props:e.props},on:{change:e.handleChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addCateSubmit("addCateForm")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")(N,q,!1,function(e){a("R7Ko")},"data-v-c738cfd6",null).exports,A={data:function(){return{goodsList:[],pagesize:10,pagenum:1,total:0,loading:!0}},created:function(){this.initList()},methods:{initList:function(){var e,t=this;(e={params:{query:this.query,pagenum:this.pagenum,pagesize:this.pagesize}},d.a.get("goods",e).then(function(e){return e.data})).then(function(e){t.goodsList=e.data.goods,t.total=e.data.total,t.loading=!1})},handleSizeChange:function(e){this.pagesize=e,this.initList()},handleCurrentChange:function(e){this.pagenum=e,this.initList()},toAddGoods:function(){this.$router.push({name:"AddGoods"})}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"goods"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品列表")])],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"success",plain:""},on:{click:e.toAddGoods}},[e._v("添加商品")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"margin-15",staticStyle:{width:"100%"},attrs:{data:e.goodsList,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_price",label:"价格",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_number",label:"数量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_weight",label:"重量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_state",label:"商品状态",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"添加时间",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"upd_time",label:"更新时间",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hot_mumber",label:"热销数量",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"热销",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:""},model:{value:t.row.is_promote,callback:function(a){e.$set(t.row,"is_promote",a)},expression:"scope.row.is_promote"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",title:"编辑商品",plain:""},on:{click:function(a){e.showEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",title:"删除商品",plain:""},on:{click:function(a){e.showDeleteDialog(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var T=a("VU/8")(A,G,!1,function(e){a("oCOC")},"data-v-7087119d",null).exports,j={data:function(){return{active:0,activeName:"first",is_promote:!1,goodsInfo:[]}},methods:{next:function(){this.active++>3&&(this.active=0)},handleClick:function(e,t){this.active=Number(e.index)},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},getToken:function(){return{Authorization:localStorage.getItem("mytoken")}},handleSuccess:function(e,t,a){console.log(e),this.$message({type:"success",message:e.meta.msg})}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addGoods"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("商品列表")])],1)],1)],1),e._v(" "),a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"步骤 1"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 3"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 4"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 5"}})],1),e._v(" "),a("div",{staticClass:"editGoodsInfo"},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"first"}},[a("el-form",{ref:"goodsInfo",attrs:{model:e.goodsInfo,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:e.goodsInfo.goods_name,callback:function(t){e.$set(e.goodsInfo,"goods_name",t)},expression:"goodsInfo.goods_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{model:{value:e.goodsInfo.goods_price,callback:function(t){e.$set(e.goodsInfo,"goods_price",t)},expression:"goodsInfo.goods_price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{model:{value:e.goodsInfo.goods_weight,callback:function(t){e.$set(e.goodsInfo,"goods_weight",t)},expression:"goodsInfo.goods_weight"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{model:{value:e.goodsInfo.goods_number,callback:function(t){e.$set(e.goodsInfo,"goods_number",t)},expression:"goodsInfo.goods_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否促销",prop:"is_promote"}},[a("el-switch",{model:{value:e.goodsInfo.is_promote,callback:function(t){e.$set(e.goodsInfo,"is_promote",t)},expression:"goodsInfo.is_promote"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品参数",name:"second"}},[e._v("配置管理")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品属性",name:"third"}},[e._v("角色管理")]),e._v(" "),a("el-tab-pane",{attrs:{label:"商品图片",name:"fourth"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"http://111.231.234.250:8888/api/private/v1/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,headers:e.getToken(),"on-success":e.handleSuccess,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"商品内容",name:"five"}},[e._v("定时任务补偿")])],1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(j,H,!1,function(e){a("vyrR")},"data-v-3fcc3104",null).exports,P={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"params"},[this._v("\r\n    分类参数页面\r\n")])},staticRenderFns:[]};var W=a("VU/8")({},P,!1,function(e){a("LedW")},"data-v-70d8c34f",null).exports,J={data:function(){return{pagenum:"1",pagesize:"10",orderList:[],total:0,commonTime:""}},created:function(){this.init()},methods:{init:function(){var e,t=this;(e={params:{query:this.query,pagenum:this.pagenum,pagesize:this.pagesize}},d.a.get("orders",e).then(function(e){return e.data})).then(function(e){if(200===e.meta.status){t.orderList=e.data.goods,t.total=e.data.total,console.log(t.orderList);for(var a=0,o=t.orderList.length;a<o;a++){var n=new Date(1e3*t.orderList[a].create_time);t.orderList[a].create_time=n.toLocaleString()}}})},handleSizeChange:function(e){this.pagesize=e,this.init()},handleCurrentChange:function(e){this.pagenum=e,this.init()}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"orders"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("订单列表")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderList,stripe:""}},[a("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order_price",label:"商品价格",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order_pay",label:"支付方式",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_send",label:"是否发货"}}),e._v(" "),a("el-table-column",{attrs:{prop:"consignee_addr",label:"发货地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",title:"编辑角色",icon:"el-icon-edit",plain:""}}),e._v(" "),a("el-button",{attrs:{type:"danger",title:"删除角色",icon:"el-icon-delete",plain:""}}),e._v(" "),a("el-button",{attrs:{type:"warning",title:"授权角色",icon:"el-icon-check",plain:""},on:{click:function(a){e.showDialog(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var M=a("VU/8")(J,K,!1,function(e){a("H33r")},"data-v-3ab35e6d",null).exports,X=a("P8yQ"),Z=a.n(X),Q={data:function(){return{data:""}},created:function(){this.init()},methods:{init:function(){var e,t=this;(e=1,d.a.get("reports/type/"+e).then(function(e){return e.data})).then(function(e){console.log(e),200===e.meta.status&&(t.data=e.data,t.myEchart(t.data))})},myEchart:function(e){Z.a.init(document.querySelector(".box"),"dark").setOption({tooltip:{trigger:"axis",axisPointer:{type:"line",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},legend:e.legend,xAxis:e.xAxis,yAxis:e.yAxis,series:e.series})}}},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"reports"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[this._v("首页")]),this._v(" "),t("el-breadcrumb-item",[this._v("数据报表")])],1)],1)],1),this._v(" "),t("div",{staticClass:"box"})],1)},staticRenderFns:[]};var ee=a("VU/8")(Q,Y,!1,function(e){a("7uTX")},"data-v-6338461a",null).exports;o.default.use(r.a);var te=new r.a({routes:[{path:"/login",name:"Login",component:v},{path:"/",name:"Home",component:y,redirect:{path:"/welcome"},children:[{path:"welcome",name:"Welcome",component:F},{path:"users",name:"Users",component:x},{path:"roles",name:"Roles",component:L},{path:"rights",name:"Rights",component:z},{path:"categories",name:"Category",component:O},{path:"goods",name:"Goods",component:T},{path:"addGoods",name:"AddGoods",component:B},{path:"params",name:"Params",component:W},{path:"reports",name:"Reports",component:ee},{path:"orders",name:"Orders",component:M}]}]}),ae=a("zL8q"),oe=a.n(ae),ne=(a("tvR6"),a("yh13"),a("NYxO"));o.default.use(ne.a);var ie={setUsername:function(e,t){e.username=t,localStorage.setItem("username",t)}},re={username:function(e){return localStorage.getItem("username")}},se=new ne.a.Store({state:{username:""},getters:re,actions:{},mutations:ie});o.default.use(oe.a),o.default.config.productionTip=!1,te.beforeEach(function(e,t,a){localStorage.getItem("mytoken")?a():"/login"!==e.path?a({path:"/login"}):a()}),new o.default({el:"#app",router:te,store:se,components:{App:i},template:"<App/>"})},R7Ko:function(e,t){},ZF7o:function(e,t){},gHy2:function(e,t){},iFEc:function(e,t){},oCOC:function(e,t){},tvR6:function(e,t){},uJiV:function(e,t){},vyrR:function(e,t){},xoAv:function(e,t){},yh13:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f712507ba131496ff703.js.map